const fs = require('fs');
let exec = require('child_process').exec;
const list = 'find . -type d';

function getKey(path) {
    const paths = path.split("./");
    return paths[1];
}

exec(list, function(error, stdout) {
    var maps = {};
    stdout.split('\n').map(line => {
        const key = getKey(line);
        if (key) {
            return maps[key] = line.replace('./', 'node_modules/@ericsson/cus-ui/');
        }
    });
    fs.writeFile("./cus-ui-mappings.json", JSON.stringify(maps), (err) => {
        if (err) {
            return 0;
        }
    });
});