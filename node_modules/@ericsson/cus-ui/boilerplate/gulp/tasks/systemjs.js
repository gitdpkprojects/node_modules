const gulp = require('gulp');
const concat = require('gulp-concat');
const typescript = require('gulp-typescript');
const Builder = require('systemjs-builder');
const conf = require('../config');

gulp.task('copy-systemjs-lib', copySystemJSLib);
gulp.task('copy-required-files', ['copy-systemjs-lib'], copyExtras);

/* copy systemjs lib files */
function copySystemJSLib() {
    return gulp.src(
            [
                'system.src.js',
                'system-polyfills.js'
            ], { cwd: "node_modules/systemjs/dist/" })
        .pipe(concat('systemjs.lib.js'))
        .pipe(gulp.dest(conf.path.tmp('build')))
        .pipe(gulp.dest(conf.path.dist('/assets/js')));
}

/* copy systemjs lib files */
function copyExtras() {
    gulp.src([conf.path.tmp("compiled/@ericsson/cus-ui/boilerplate/system-config.js")]).pipe(gulp.dest(conf.path.tmp('build')));
    gulp.src([conf.path.tmp("compiled/main-import.js")]).pipe(gulp.dest(conf.path.tmp('build')));
}