import { Injectable } from '@angular/core';
import { Subject } from 'rxjs/Subject';
import { Subscription } from 'rxjs/Subscription';


@Injectable()
export class EventService {

  /**
   * Publish an event when required
   * @param prop
   * @param message
   */
  publish(prop: string, message: any): void {
    if (this[prop] && !this[prop].isUnsubscribed) {
      this[prop].next(message);
    }
  }

  /**
   * Subscribe to an event when required
   * @param prop
   * @param callback
   */
  subscribe(prop: string, callback?: Function): Subscription {
    this[prop] = new Subject<any>();
    return this[prop].subscribe(callback);
  }

  /**
   * Unsubscribe from the event
   * @param prop
   */
  unsubscribe(prop: string) {
    this[prop].unsubscribe();
  }
}
