[//]: # (title: Loader)
[//]: # (category: Loader)
[//]: # (icon: fa-spinner)

#Loader
* import { LoaderConfig, LoaderModule, LoaderService } from '@ericsson/oden';

** Check out Element Overlay to use Loader with common error messages

Sometimes you want to fetch data from an external source or data that is unusually big. Then it is good practice
to show a spinning loader so the user knows that we're waiting for something to finish loading. This is where
`[cuiLoader]` comes in handy. Just apply `[cuiLoader]="boolean"` to the element where you want
the loader to appear whenever the boolean becomes true.

## LoaderService
Import LoaderModule.forRoot() to instantiate LoaderService

##Usage example #1

####template.html
```
<div [cuiLoader]="loading">
    {{myData}}
</div>
```

####component.ts
```
...
// Define variables
myData: string;
loading: boolean = false;

// Our fetch data function
fetchData() {
    this.loading = true;
    ...
    // Fetch data and when finished:
    ...
    .then((response) => {
        this.myData = response.data;
        this.loading = false;
        ...
    }
}
```

##Usage example #2

It's also possible to pass a **LoaderConfig** object instead of a boolean into the directive.
By doing so you can specify a loading text as well as injecting the loader deeper into the DOM (useful when
applying the directive to components you have no control of).

The config class looks like this:

####loader.config.ts
```
// Configuration model for loader. Can be provided on loader creation.
export class LoaderConfig extends QuickAssign {
    visible: boolean = false; // Show if true, hide if false (default)
    text: string; // Optional. This text will be shown just below the spinner
    addToElement: string;   // Optional, should be a tagname, .class or #id.
                            // If provided the loader will be moved into the first child element that
                            // matches this tagname/class/id.
    isTabLoader: boolean;   // Optional. Set to true if this loader is the loader for tabs
}
```

And this is how you could implement this. In this example we are adding the directive to
a `cui-panel-item` component we have no control of and we want the loader to show up inside
the `.panel-content` element inside it.

####template.html
```
<cui-panel-item [cuiLoader]="panelLoader" (onOpen)="fetchData()" (onClose)="hideLoader()">
    {{myData}}
</div>
```

####component.ts
```
import { LoaderConfig } from '@ericsson/oden';
...
// Define variables
myData: string;
loaderConfig: LoaderConfig = new LoaderConfig({
    text: 'Fetching data...',
    addToElement: '.panel-content',
    visible: false
});

// Our fetch data function
fetchData() {
    this.loaderConfig.visible = true;
    ...
    // Fetch data and when finished:
    ...
    .then((response) => {
        this.myData = response.data;
        this.loaderConfig.visible = false;
        ...
    }
}

// Hide loader on close
hideLoader(): void {
    this.loaderConfig.visible = false;
}

```

##Using a TabLoader

Using a loader for the tabs/pages is easy - just wrap your `<router-outlet>` with a loader, like this.

####myApp.component.html
```
<cui-app-header
...
></cui-app-header>
<div [cuiLoader]="tabLoader">
    <router-outlet></router-outlet>
</div>
```

####myApp.component.ts
```
...
tabLoader: LoaderConfig = new LoaderConfig({
    isTabLoader: true
});
...
```

Then show the loader in your page's `ngAfterViewInit` by calling `this.tabViewService.loader.show();` and then hide it whenever/wherever you want with `this.tabViewService.loader.hide();`


- - -

#Deprecated Loader

`cuiLoader` was previously available as a component element instead of a directive. This
method is now deprecated and will be removed in later releases. Please upgrade and use the directive above
instead.

```
<cui-loader [loaderText]="string" [visible]="boolean"></cui-loader>
```

###[loaderText]:_string_
If you want to show what's being loaded, you can specify that with this attribute. The text will be shown just
below the spinning loader.

###[visible]:_boolean_
If true the loader will be shown.

##Usage example #1

Insert the loader component in your template and then grab it in your component like this:

####template.html
```
<cui-loader #myLoader></cui-loader>
```

####component.ts
```
import { LoaderComponent } from '@ericsson/oden';
...
@ViewChild('myLoader') myLoader: LoaderComponent;
```

You can now show, hide and change text on the loader like this:

```
// Show the loader
this.myLoader.show();
// Hide the loader
this.myLoader.hide();
// Set loading text:
this.myLoader.setText('Loading data ...');
```

##Usage example #2

Another approach without having to import the LoaderComponent is to just toggle the `visible` attribute:

####template.html
```
<cui-loader [loaderText]="loaderText" [visible]="showLoader"></cui-loader>
```

####component.ts
```
...
// Define variables
loaderText: string = '';
showLoader: boolean = false;

// Our fetch data function
fetchData() {
    this.loaderText = 'Loading data ...';
    this.showLoader = true;
    ...
    // Fetch data and when finished:
    ...
    .then(() => {
        this.showLoader = false;
        ...
    }
}
```
