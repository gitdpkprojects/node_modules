import {
    Component, ElementRef, ViewEncapsulation,
    Input, OnInit, HostBinding, OnChanges, Renderer2
} from '@angular/core';

@Component({
    selector: 'cui-icon',
    template: '',
    styleUrls: ['icon.component.scss'],
    encapsulation: ViewEncapsulation.None
})
export class IconComponent implements OnInit, OnChanges {
    @Input() icon: string;
    @Input() align: string;

    @HostBinding('class.cui-icon') addClass: boolean = true;
    constructor(public element: ElementRef, private _renderer: Renderer2) {}

    /**
     * Set icon class based on 'icon' input
     * Set class align-right on load if align === 'right'
     */
    ngOnInit(): void {
        this._renderer.addClass(this.element.nativeElement, 'icon-' + this.icon);
        if (this.align === 'right') {
            this._renderer.addClass(this.element.nativeElement, 'align-right');
        }
    }

    /**
     * Change icon class if icon changes
     */
    ngOnChanges(changes: any): void {
        if (changes.icon !== undefined) {
            this._renderer.removeClass(this.element.nativeElement, 'icon-' + changes.icon.previousValue);
            this._renderer.addClass(this.element.nativeElement, 'icon-' + changes.icon.currentValue);
        }
    }
}
