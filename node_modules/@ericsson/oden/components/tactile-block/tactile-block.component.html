<div class="wrapper" [@state]="state" [class.collapsed]="state === 'collapsed'" [attr.tabindex]="wrapperTabIndex" #wrapper>
    <div>
        <div class="color-code" [style.border-top-color]="getColorCode()"></div>
        <div class="header-wrapper">
            <div class="header-wrapper-header" [cuiTooltip]="(isInLibrary && (!maximized || disabled)) ? tooltip : null" [tooltipMaxWidth]="'516px'">
                <div cui-indicate-dragging class="header-prefix">
                    <cui-icon [icon]="'movable'"></cui-icon>
                </div>
                <div class="header">
                    <div class="subtitles-container">
                        <span class="subtitle" *ngIf="tactileBlockItem?.subtitle">{{tactileBlockItem?.subtitle}}</span>
                        <span class="subtype" *ngIf="tactileBlockItem?.subtype">{{tactileBlockItem?.subtype}}</span>
                    </div>
                    <cui-icon class="small" [cuiTooltip]="tactileBlockItem.iconTooltip" [icon]="tactileBlockItem.icon" *ngIf="tactileBlockItem.icon"></cui-icon>
                    <h4 [cuiTooltip]="(isInLibrary && (!maximized || disabled)) ? null : tactileBlockItem.title" [cuiTooltipOnOverflow]="true">
                        <span class="title" [innerHTML]="tactileBlockItem.title"></span>
                        <span class="placeholder-title" *ngIf="tactileBlockItem.placeholderTitle" [innerHTML]="tactileBlockItem.placeholderTitle"></span>
                    </h4>
                </div>
            </div>
            <div *ngIf="tactileBlockItem && !tactileBlockItem.disabled" cui-prevent-dragging class="header-actions">
                <cui-action-menu class="hover-item" [class.always-show]="selected || showHoverItems || _isKeyboardFocused" (focus)="onFocus()" (blur)="onBlur()"
                     *ngIf="showActionMenu()" [actions]="tactileBlockItem.menuActions" [tabIndex]="actionMenuTabIndex"
                     (onActionClick)="menuClick($event)"></cui-action-menu>
                <cui-action-menu
                     *ngIf="showLibraryActionMenu()" [actions]="_libraryMenuActions" [tabIndex]="actionMenuTabIndex"
                     (onActionClick)="menuClick($event)"></cui-action-menu>
            </div>
        </div>
        <div cui-prevent-dragging class="content-and-action">
            <div class="content">
                <ng-content></ng-content>
                <div #childContainer></div>
            </div>
            <div class="action" *ngIf="isInLibrary && !disabled && !!tactileBlockItem.buttonActions">
                <button cui-button class="small" [class.primary]="!(item.data && item.data.secondary)" [tabindex]="state === 'collapsed' ? '-1' : '0'" *ngFor="let item of tactileBlockItem.buttonActions"
                        [disabled]="item.disabled"
                        [icon]="item.icon ? item.icon : null"
                        [icon_align]="item.icon_align ? item.icon_align : null"
                        (focus)="state = 'expanded'"
                        (click)="buttonClick(item, $event)"
                        [value]="item.label">{{item.label}}</button>
            </div>
            <div *ngIf="tactileBlockItem && (tactileBlockItem.humanReadableId || tactileBlockItem.modifiedDate)" class="trailer">
                <span [class.hidden]="!tactileBlockItem.humanReadableId" [cuiTooltip] [cuiTooltipOnOverflow]="true" [dynamicCuiTooltipContent]="true">ID: {{tactileBlockItem.humanReadableId}}</span>
                <span [class.hidden]="!tactileBlockItem.modifiedDate">{{'ODEN.COMMON.MODIFIED' | translate}}: {{tactileBlockItem.modifiedDate | date:'y-MM-dd HH:mm'}}</span>
            </div>
        </div>
    </div>
</div>
<ng-template #tooltip>
    <div class="cui-tactile-block-tooltip">
        <div *ngIf="tactileBlockItem && tactileBlockItem.tooltip && disabled" class="tooltip-item-tooltip">
            <cui-annotation>
                <p [innerHTML]="tactileBlockItem.tooltip"></p>
            </cui-annotation>
        </div>
        <div *ngIf="!maximized || !disabled" class="tooltip-content">
            <div class="tooltip-header">
                <div class="tooltip-subtitles-container">
                    <span class="tooltip-subtitle" *ngIf="tactileBlockItem?.subtitle">{{tactileBlockItem?.subtitle}}</span>
                    <span class="tooltip-subtype" *ngIf="tactileBlockItem?.subtype">{{tactileBlockItem?.subtype}}</span>
                </div>
                <div class="tooltip-title">
                    <span class="tooltip-title" [innerHTML]="tactileBlockItem.title"></span>
                    <span class="tooltip-placeholder-title" *ngIf="tactileBlockItem.placeholderTitle" [innerHTML]="tactileBlockItem.placeholderTitle"></span>
                </div>
            </div>
            <div *ngIf="tactileBlockItem?.description" class="tooltip-description" [innerHTML]="tactileBlockItem.description">
            </div>
            <div *ngIf="tactileBlockItem && (tactileBlockItem.humanReadableId || tactileBlockItem.modifiedDate)" class="tooltip-trailer">
                <span [class.hidden]="!tactileBlockItem.humanReadableId" [cuiTooltip]="tactileBlockItem.humanReadableId" [cuiTooltipOnOverflow]="true">ID: {{tactileBlockItem.humanReadableId}}</span>
                <span [class.hidden]="!tactileBlockItem.modifiedDate">{{'ODEN.COMMON.MODIFIED' | translate}}: {{tactileBlockItem.modifiedDate | date:'y-MM-dd HH:mm'}}</span>
            </div>
        </div>
    </div>
</ng-template>
