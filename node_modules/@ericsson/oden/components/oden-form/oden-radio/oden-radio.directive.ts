import { Directive, HostBinding, Input, EventEmitter, Output, AfterViewInit } from '@angular/core';
import { OdenSelectionInputBaseDirective } from '../oden-form-base-classes/oden-selection-input-base-directive';
import { INPUT_TYPE } from '../../../core/services/oden-form.service';

@Directive({
    selector: '[oden-radio]'
})
export class OdenRadioDirective extends OdenSelectionInputBaseDirective implements AfterViewInit {
    @HostBinding('class.oden-radio') _hasOdenRadioClass: boolean = true;
    @HostBinding('attr.value') @Input() value: string;
    @Output() click = new EventEmitter<void>();

    ngAfterViewInit() {
        super.ngAfterViewInit();
        this._formService._inputType.next(INPUT_TYPE.CHECKBOX);
    }

    protected _onControlValueChange() {
        this._ngControl.control.setValue(this._elementRef.nativeElement.value);
    }

    protected _onValueChange() {
        this.click.emit();
    }
}
