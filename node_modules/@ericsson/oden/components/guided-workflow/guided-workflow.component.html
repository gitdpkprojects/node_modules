<div *ngIf="step">
    <cui-container>
        <cui-row class="first-row unresponsive" [style.opacity]="minimizedOpacity">
            <cui-column [column-size]="4">
                <div>
                    <cui-icon icon="guide" class="small"></cui-icon>
                    <cui-breadcrumb *ngIf="guide.breadcrumb && guide.breadcrumb.length > 0" [items]="guide.breadcrumb"></cui-breadcrumb>
                </div>
            </cui-column>
            <cui-column [column-size]="4" class="align-center">
                <div class="workflow-pagination" [style.opacity]="isMaximized ? 0 : null">
                    <div *ngFor="let _step of guide.steps" [cuiTooltip]="_step.title"
                         [ngClass]="{active: step.number === _step.number, locked: _step.locked }"></div>
                </div>
            </cui-column>
            <cui-column [column-size]="4">
                <div class="align-right" *ngIf="guide.actionMenuActions.length > 0">
                    <cui-action-menu
                        [actions]="guide.actionMenuActions"
                        (onActionClick)="actionMenuActionClick($event)"></cui-action-menu>
                </div>
            </cui-column>
        </cui-row>
        <cui-row class="second-row unresponsive">
            <cui-column [column-size]="3">
                <div *ngIf="!guide.hideBack">
                    <ng-container *ngFor="let _step of guide.steps">
                        <span class="button-wrapper" [class.fade]="!(step.number - 1 === _step.number)" [style.top]="buttonYPosition+'px'" *ngIf="_step.number != guide.steps.length"><button [disabled]="_step.locked" cui-button class="inverted" icon="arrow-left" [value]="_step.title" (click)="goToStep(_step.number)"></button></span>
                    </ng-container>
                </div>
            </cui-column>
            <cui-column [column-size]="6" class="workflow-content align-center">
                <h3 [style.top]="titleYPosition+'px'">{{step.title}}<span class="icon-loader-wrapper"><cui-icon (click)="toggleMaximize()" *ngIf="!overviewLoading" icon="chevron-up"></cui-icon><span *ngIf="overviewLoading" [cuiLoader]="overviewLoader"></span></span></h3>
                <div [style.opacity]="isMaximized ? 0 : minimizedOpacity" [cuiTooltip]="!isMaximized ? step.description : null" [cuiTooltipOnOverflow]="true">{{step.description}}</div>
            </cui-column>
            <cui-column [column-size]="3" class="next-button">
                <div class="align-right">
                    <span class="button-wrapper left-to-right" [style.top]="buttonYPosition+'px'" *ngIf="step.hideFutureSteps"><button (click)="goToStep(step.number + 1)" [disabled]="step.nextDisabled" [cuiTooltip]="step.nextDisabled && step.nextDisabledMessage != '' ? step.nextDisabledMessage : null" cui-button class="inverted" icon_align="right" icon="arrow-right" [value]="'ODEN.COMMON.NEXT' | translate"></button></span>
                    <ng-container *ngFor="let _step of guide.steps">
                        <span class="button-wrapper left-to-right" [class.fade]="step.hideFutureSteps || step.number != _step.number - 1" [style.top]="buttonYPosition+'px'" [cuiTooltip]="_step.locked && _step.lockedMessage != '' ? _step.lockedMessage : null" *ngIf="_step.number > 1"><button [disabled]="_step.locked" cui-button class="inverted" icon_align="right" icon="arrow-right" [value]="_step.title" (click)="goToStep(_step.number)"></button></span>
                    </ng-container>
                    <ng-container *ngIf="!step.hideFutureSteps && step.number === guide.steps.length">
                        <span class="button-wrapper" [style.top]="buttonYPosition+'px'"><button cui-button class="inverted" [disabled]="guide.finishLocked" [value]="guide.finishTitle || 'ODEN.COMMON.FINISH' | translate" (click)="finishGuideClick()" id="finishedButton"></button></span>
                    </ng-container>
                </div>
            </cui-column>
        </cui-row>
        <cui-row class="third-row">
            <cui-column [column-size]="12">
                <cui-row *ngIf="!overviewLoading">
                    <cui-column [class.unknown]="(!guide.overviewSteps && step.hideFutureSteps && _step.number > step.number) || (!guide.overviewSteps && guide.steps[_step.number - 2] && guide.steps[_step.number - 2].hideFutureSteps)" class="no-max-width"
                            [column-size]="3" *ngFor="let _step of overviewSteps" [ngClass]="{active: _step.number === step.number, locked: _step.locked }">
                        <h4><span>{{_step.number}}</span><strong>{{_step.title}}</strong></h4>
                        <div>{{_step.description}}</div>
                    </cui-column>
                </cui-row>
            </cui-column>
        </cui-row>
    </cui-container>
</div>
