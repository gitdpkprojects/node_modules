[//]: # (title: Bucket)
[//]: # (category: Bucket Visualisation)
[//]: # (icon: fa-bitbucket)

#Bucket Visualisation
* import { BucketVisualisationComponent } from '@ericsson/oden';

A Bucket Visualisation component is used when you have the need to either configure thresholds with status values in a bucket or
visulize a bucket with different values relative to the bucket size, i.e. min, max, initial and thresholds.

**Note:** If it is desired to show the values proportionally against each other it is important that the values are normalized or based on the same unit.

```
<cui-bucket-visualisation
    [bucket]="Bucket | BucketInformation"
    [thresholds]="Array<BucketThreshold | Threshold>"
    [interval]="BucketInterval"
    [statuses]="Array<Status>"
    [selectedThresholds]="Array<BucketThreshold | Threshold>"
    [thresholdErrors]="Array<ThresholdError>"
    [error]="BucketError"
    [options]="VisualisationOptions"
    (onChange)="function($event: Array<Threshold>)"
    (onSelectedThresholdsChange)="function($event: Array<BucketThreshold>)"
></cui-bucket-visualisation>
```
###[bucket]_:Bucket | BucketInformation___*__
Class containing information about the bucket such as values

###[thresholds]_:Array&lt;BucketThreshold | Threshold&gt;_
Threshold values to be selectable or shown proportionally in the bucket.

###[interval]_:BucketInterval_
Specified an interval that will be proportionally displayed in the bucket. Will only be displayed if the bucket type is `SHOW_THRESHOLDS_RELATIVE_WITH_VALUE`.

###[statuses]_:Array&lt;Status&gt;_
Status values to be displayed in the bucket, if empty / null none will be showed

###[selectedThresholds]_:Array&lt;BucketThreshold | Threshold&gt;_
Threshold values that will be pre-selected in the selectboxes.

###[thresholdErrors]_:Array&lt;ThresholdError&gt;_
Used for showing error messages to specific thresholds based on their IDs.
The error will be displayed as a tooltip of the dropdown where the threshold is selected.

###[error]_:BucketError_
**DEPRECATED!** Use thresholdErrors instead to be able to set specific errors on specific thresholds
Errors that should be shown, will match to selected threshold and mark that selectbox

###[options]_:VisualisationOptions_
VisualisationOptions class containing options such as disable threshold selection etc.

###(redraw)_:function()_
Redraw bucket.

###(onChange)_:function($event: Array&lt;Threshold&gt;)_
**DEPRECATED!** Use onSelectedThresholdsChange instead
This event will be triggered when a new selection have been made or changed.

###(onSelectedThresholdsChange)_:function($event: Array&lt;BucketThreshold&gt;)_
This event will be triggered when a new selection have been made or changed.

##Bucket visualisation model

####BUCKET_MODE
```js
export enum BUCKET_MODE {
    SHOW_STATUSES_AND_SELECT_THRESHOLDS, // Default Mode
    SHOW_THRESHOLDS_RELATIVE_WITH_VALUE
}
```

#### BucketValue
```js
export class BucketValue {
    value: number; // The value, all values in the bucket are expected
                   // to be normalized to the same unit of measurement.
    displayValue?: string; // The text that describes the value.
                           // This property will be used whenever this value is displayed in the bucket.
                           // If this property is absent the raw value will be displayed instead.
}

// Example:
new BucketValue({
    value: 1000,
    displayValue: '1 kB'
});
```

####Bucket
```js
export class Bucket {
    id?: string; // Bucket id
    name?: string; // Bucket name

    minValue?: BucketValue; // The minimum value
    maxValue?: BucketValue; // The maximum value
    initialValue?: BucketValue; // The initial value
    actualValue?: BucketValue; // The actual value
}
```

####BucketThreshold
```js
export class BucketThreshold {
    id?: string; // Threshold specification Id
    name?: string; // Threshold Name
    value: BucketValue; // Threshold value
    order?: number; // Used for selected thresholds, lowest goes first in selected boxes
}
```

####BucketInterval
```js
export class BucketInterval {
    upperBound: EndPoint; // The upper bound of the interval
    lowerBound: EndPoint; // The lower bound of the interval
}
```

####EndPoint
```js
export class EndPoint {
    id: string; // The id of the end point
    name: string; // The name of the endpoint
    value?: BucketValue; // The value for the end point.
                         // An infinite end point is assumed if this value is absent.
    inclusive: boolean; // Whether the specified value is included in the interval
                        // where this end point is used.
}
```

####VisualisationOptions
```js
export class VisualisationOptions {
    disabled?: boolean; // Should threshold selectboxes be readonly
    showUnitOnThreshold?: boolean; // ** Deprecated ** This property is no longer used
                                   // and will have no effect on the bucket
    noneSelection?: boolean; // Should there be a none selection
    bucketMode: BUCKET_MODE; // Which mode the bucket should be in
    statusOrder: STATUS_ORDER; // Ascending is default
    bucketHeight?: number; // Specifies a custom height for the bucket,
                           // the default value is 300px. The minimum height is 100.
                           // If the value for the height is specified to be lower than 100,
                           // 100 will be used instead.
}
```

####Status
```js
export class Status {
    id: string; // Id of the status
    orderIndex: number; // Default ascending order, option for descending
    name: string; // Name of the status
}
```

####ThresholdError
```js
export class ThresholdError {
    thresholdId: string; // Any dropdowns that holds this treshold will be marked as an error
                         // and an error message will be displayed as a tooltip when hover over the dropdown.
    message: string; // The error message
}
```

### Deprecated classes

*Deprecated* - Use Bucket instead
```js
export class BucketInformation {
    id: string; // Bucket Id
    name: string; // Bucket Name
    unit: string; // Bucket unit of measure
    minValue: ValueWithUnit; // Minimal value
    minValueInBucketUnit: ValueWithUnit; // Minimal value converted to bucket UOM
    maxValue?: ValueWithUnit; // Maximal value
    maxValueInBucketUnit?: ValueWithUnit; // Maximal value converted to bucket UOM
    initialValue?: ValueWithUnit; // Initial value
    initialValueInBucketUnit?: ValueWithUnit; // Initial value converted to bucket UOM
}
```

*Deprecated* - Use BucketThreshold instead
```js
export class Threshold {
    id: string; // Threshold specification Id
    name: string; // Threshold Name
    value: ValueWithUnit; // Threshold value
    order?: number; // Used for selected thresholds, lowest goes first in selected boxes
}
```

*Deprecated* - Use BucketValue instead
```js
export class ValueWithUnit {
    value: number; // Value ex 500
    unit: string; // Unit this value is represented in
}
```

*Deprecated* - Use ThresholdError instead
```js
export class BucketError {
    thresholdIds?: Array<string>; // Ids of the thresholds that should be marked with the error
    message: string; // Message that will be disaplayed
}
```

## InBucketUnit
**DEPRECATED!**
Unit is no longer part of the bucket, all values are expected to be normalized to the same unit.
The unit may be part of the *displayValue* if it is desired to show values with different units.

<del>The *InBucketUnit value on thresholds, max / min / initial value etc is used for comparing the values correctly when it comes to showing them with dynamic position.</del>

<del>In the example when you don't use initial or BUCKET\_MODE.SHOW\_THRESHOLDS\_RELATIVE\_WITH\_VALUE you can use any value in them but they will still be checked so they are set.</del>
