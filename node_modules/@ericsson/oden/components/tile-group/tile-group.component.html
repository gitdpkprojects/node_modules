<div class="tiles-views" *ngIf="showLayouts && (showLandscape || showTable)">
    <div>
        <cui-icon class="small" tabindex="0" [class.active]="layout === tiles.LANDSCAPE" (click)="changeLayout(tiles.LANDSCAPE)" (blur)="removeTabbed()" [icon]="'tile-view'" *ngIf="showLandscape && !hideLandscape"></cui-icon>
        <cui-icon class="small" tabindex="0" [class.active]="layout === tiles.PORTRAIT" (click)="changeLayout(tiles.PORTRAIT)" (blur)="removeTabbed()" [icon]="gridIcon"></cui-icon>
        <cui-icon class="small" tabindex="0" [class.active]="layout === tiles.TABLE" (click)="changeLayout(tiles.TABLE)" (blur)="removeTabbed()" [icon]="'table-view'" *ngIf="showTable"></cui-icon>
    </div>
</div>
<cui-batch-actions
    [visible]="batchActions.length > 0 && selectedItems.length > 0"
    [selectedItems]="selectedItems"
    [batchActions]="batchActions"
    [selectedItemsText]="'ODEN.COMPONENTS.TILE.ITEMS_SELECTED' | translate:{COUNT: selectedItems.length}"
    (onBatchClick)="batchClick($event)"
    (onDeselectAll)="deselectAllItems()"
    *ngIf="layout !== tiles.TABLE && (batchActions.length > 0 || selectable)"
></cui-batch-actions>
<div class="tiles layout-{{layout}} {{size}}">
    <ng-container *ngIf="layout === tiles.TABLE && displayTableData && displayTableData.length > 0">
        <cui-table
            [headers]="tableData.header"
            [data]="displayTableData"
            [stickyHeaders]="true"
            [batchActions]="selectable ? batchActions : []"
            [singleActions]="actions"
            [selectable]="selectable"
            [useBatchActions]="batchActions.length > 0"
            (onSingleClick)="onRowActionClick($event)"
            (onBatchChanged)="onSelectRow($event)"
            (onBatchClick)="batchClick($event)"
            (onOrderChanged)="tableOrderChanged($event)"
            (onRowElementClick)="tableRowClick($event)"
            [rowTemplate]="rowTemplate">
            <ng-template #rowTemplate let-row="row">
                
                <td [class.disabled]="row.discontinued" [innerHTML]="row.title"></td>
                <td [class.disabled]="row.discontinued" [innerHTML]="row.subtitle"></td>
                <td [class.disabled]="row.discontinued" [innerHTML]="row.type"></td>
                <td [class.disabled]="row.discontinued">
                    <ng-container *ngIf="row.versions && !isNumber(row.versions)">
                        <cui-state-badge class="state" [cuiTooltip]="row.draftTooltip" *ngIf="row.draftFromTileData" [state]="row.draftFromTileData.state"></cui-state-badge>
                        <cui-state-badge class="state" [cuiTooltip]="row.timelineTooltip" *ngIf="row.nonDraftFromTileData" [state]="row.nonDraftFromTileData.state" [compact]="true"
                             [extra]="!row.draftFromTileData && row.nonDraftFromTileData.extra === 1 ? null : row.nonDraftFromTileData.extra"></cui-state-badge>
                    </ng-container>
                    <cui-state-badge class="state" [state]="row.state" *ngIf="isNumber(row.versions) && (row.state || row.state === 0)"></cui-state-badge>
                    <cui-state-badge class="versions" *ngIf="row.versions && isNumber(row.versions)" [tooltip]="row.versionsTooltip" [extra]="row.versions"></cui-state-badge>
                </td>
                <td [class.disabled]="row.discontinued" *ngIf="discontinuedColumn">{{row.discontinued ? ('ODEN.COMPONENTS.ENTITY_VERSION.DISCONTINUED' | translate) : ''}}</td>
                <td [class.disabled]="row.discontinued" *ngIf="validColumn" [innerHTML]="row.valid"></td>
                <td [class.disabled]="row.discontinued" [innerHTML]="row.description"></td>
                <td [class.disabled]="row.discontinued" *ngIf="relationColumn" [innerHTML]="row.relation"></td>
                <td [class.disabled]="row.discontinued" class="align-right" [innerHTML]="row.date | date:'yyyy-MM-dd'"></td>
            </ng-template>
        </cui-table>
    </ng-container>
    <ng-container *ngIf="layout !== tiles.TABLE">
        <ng-content></ng-content>
    </ng-container>
</div>
