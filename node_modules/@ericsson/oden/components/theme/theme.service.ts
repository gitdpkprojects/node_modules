import { Injectable, Renderer2 } from '@angular/core';

@Injectable()
export class ThemeService {

    /**
     * Toggles theme on / off
     * @param {string} theme
     * @param {Renderer2} renderer
     */
    toggleTheme(theme: string, renderer: Renderer2): void {
        if (document.body.getAttribute('theme')) {
            this.setNoTransition(renderer);
            document.body.removeAttribute('theme');
        } else {
            this.setNoTransition(renderer);
            document.body.setAttribute('theme', theme);
        }
    }

    /**
     * Turns off all css transitions for a given amount of time
     * @param {Renderer2} renderer
     */
    setNoTransition(renderer: Renderer2): void {
        if (!document.body.classList.contains('no-transition')) {
            renderer.addClass(document.body, 'no-transition');

            setTimeout(() => {
                renderer.removeClass(document.body, 'no-transition');
            }, 1000);
        }
    }
}
