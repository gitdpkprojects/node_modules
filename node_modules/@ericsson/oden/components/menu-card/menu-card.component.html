<div class="menu-card-header">
    <div
        *ngIf="menuItems.length"
        tabindex="0"
        class="menu-card-header-button"
        [class.active]="active"
        (click)="toggleMenu($event)"
        (onOpen)="open()"
        (onClose)="close()"
    >
        <div class="line1"></div>
        <div class="line2"></div>
    </div>
    <div class="menu-card-header-text">
        <cui-icon *ngIf="newWindow" [icon]="'link-away-square'" class="small link-away"></cui-icon>
        <div *ngIf="!newWindow && loadingId === id" class="card-loading"></div>
        <h3 class="menu-card-header-text menu-card-searchable" [cuiTooltip]="title" [cuiTooltipOnOverflow]="true" >{{title}}</h3>
    </div>
</div>
<div class="menu-card-menu" [class.active]="active">
    <div *ngFor="let item of filteredMenuItems; trackBy: trackBy">
        <div
            *ngIf="!item.newWindow;else external_new_window"
            class="menu-card-menu-item"
            [class.is-favorite]="isItemFavorite(item)"
            [class.before-visible]="!animationDone"
            [class.active]="isPathActive(item.path)"
            (click)="selectMenuItem($event, item)"
        >
            <em [routerLink]="item.path"></em>
            <div *ngIf="loadingId === item.path" class="loading"></div>
            <cui-icon
                *ngIf="favoritesEnabled && loadingId !== item.path"
                [icon]="isItemFavorite(item) ? 'favorite-selected' : 'favorite-unselected'"
                class="small favorite-item"
                (click)="toggleItemFavorite($event, item)"
            ></cui-icon>
            <span class="menu-card-menu-item-text menu-card-searchable">{{item.label}}</span>
        </div>
        <ng-template #external_new_window>
            <div
                class="menu-card-menu-item"
                [class.before-visible]="!animationDone"
                [class.is-favorite]="isItemFavorite(item)"
                (click)="selectMenuItem($event, item)"
            >
                <cui-icon [icon]="'link-away-square'" class="small link-away"></cui-icon>
                <cui-icon
                    *ngIf="favoritesEnabled"
                    [icon]="isItemFavorite(item) ? 'favorite-selected' : 'favorite-unselected'"
                    class="small favorite-item"
                    (click)="toggleItemFavorite($event, item)"
                ></cui-icon>
                {{item.label}}
            </div>
        </ng-template>
    </div>
</div>
<div class="menu-card-footer">
    <div>
        <cui-icon
            *ngIf="favoritesEnabled"
            [icon]="favorite ? 'favorite-selected' : 'favorite-unselected'"
            class="small"
            [class.is-favorite]="favorite || hasAppAnyItemFavorite()"
            (click)="toggleFavorite($event)"
        ></cui-icon>
    </div>
    <div class="menu-card-searchable" [cuiTooltip]="category" [cuiTooltipOnOverflow]="true">{{category}}</div>
</div>
