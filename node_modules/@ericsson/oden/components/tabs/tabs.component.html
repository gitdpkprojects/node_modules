<div class="tabs-wrapper" #tabElementRef>
    <ul *ngIf="usePaths">
        <li *ngFor="let item of visibleTabs; let i = index"
            [routerLinkActive]="['cui-tab-active']">
            <span (click)="changeTab(i, item.path, item.title)">
                <a [routerLink]="formatUrlPattern(item.path)"
                   [routerLinkActive]="'active'"
                   [style.color]="color">
                    <span class="tabs-wrapper-label">{{item.title}}</span>
                    <span class="tabs-wrapper-icon">
                        <cui-icon
                            *ngIf="item.newWindow"
                            class="icon-appswitcher cui-icon small"
                            ng-reflect-icon="appswitcher"
                            title="Switch app"></cui-icon>
                    </span>
                </a>
            </span>
        </li>
        <li class="hidden-tabs" [class.cui-tab-active]="isHiddenTabActive()">
            <ng-container *ngIf="hiddenTabs.length > 0">
                <span class="hidden-tab-indicator"
                      [innerHTML]="placeholder +' ('+ hiddenTabs.length +')'"
                      (click)="toggleHiddenTabs()">
                </span>
                <cui-icon icon="arrow-dropdown" class="small hidden-tabs-toggler" (click)="toggleHiddenTabs()"></cui-icon>
                <cui-select [placeholder]="placeholder"
                            #hiddenTabsDropRef
                            [showNoneIfNull]="false"
                            [style.color]="color"
                            class="select-tab"
                            [required]="true"
                            width="200">
                    <ng-container *ngFor="let tab of hiddenTabs; let i = index">
                        <cui-option [ngValue]="tab"
                                    [routerLink]="!tab.newWindow? formatUrlPattern(tab.path): ''"
                                    [routerLinkActive]="!tab.newWindow? 'active': ''"
                                    (onSelectItem)="itemClicked(tab, i)">
                            {{tab.title}}
                        </cui-option>
                    </ng-container>
                </cui-select>
            </ng-container>
        </li>
    </ul>
    <ul *ngIf="!usePaths">
        <li *ngFor="let item of visibleTabs; let i = index"
            [ngClass]="{'cui-tab-active' : item.active}">
            <span (click)="changeTab(i, null, item.title)">
                <a [ngClass]="{'active': item.active}"
                    [style.color]="color">
                    {{item.title}}
                    <cui-icon
                        *ngIf="item.newWindow"
                        class="icon-appswitcher cui-icon small"
                        ng-reflect-icon="appswitcher"
                        title="Switch app"></cui-icon>
                </a>
            </span>
        </li>
        <li class="hidden-tabs" [class.cui-tab-active]="isHiddenTabActive()">
            <ng-container *ngIf="hiddenTabs.length > 0">
                <span class="hidden-tab-indicator"
                      [innerHTML]="placeholder +' ('+ hiddenTabs.length +')'"
                      (click)="toggleHiddenTabs()">
                </span>
                <cui-icon icon="arrow-dropdown" class="small hidden-tabs-toggler" (click)="toggleHiddenTabs()"></cui-icon>
                <cui-select [placeholder]="placeholder"
                            #hiddenTabsDropRef
                            [showNoneIfNull]="false"
                            [style.color]="color"
                            class="select-tab"
                            [required]="true"
                            width="200">
                    <ng-container *ngFor="let tab of hiddenTabs; let i = index">
                        <cui-option [ngValue]="tab"
                                    [ngClass]="{'active': tab.active}"
                                    (onSelectItem)="itemClicked(tab, i)">
                            {{tab.title}}
                        </cui-option>
                    </ng-container>
                </cui-select>
            </ng-container>
        </li>
    </ul>
    <cui-inkbar [ngClass]="{'hidden': !tabs.length}" #inkBar></cui-inkbar>
</div>
