[//]: # (title: Universal Overlay)
[//]: # (category: Header & Navigation)
[//]: # (icon: fa-rocket)

#Universal Overlay
* import { UniversalService, UniversalTabView } from '@ericsson/oden';

The Universal Overlay is the new menu overlay system, replacing the `MainMenuComponent`. To use it, make sure your main html file looks like this:

```html
<div id="wrapper">
    <cui-universal-overlay
        [profile]="profile"
        [appTitle]"'Ericsson Revenue Manager'"
        >
        <cui-universal-tabs></cui-universal-tabs>
    </cui-universal-overlay>
    <div id="app">
        <cui-systembar
            [profile]="profile"
            [actions]="systemActions"
            [profileActions]="profileActions"
            (onSystemActionClick)="onSystemAction($event)"
            (onMenuClick)="toggleMenu()"></cui-systembar>
        <div id="cui-application" cui-autoscroll>
            <div class="cui-application">
                <router-outlet></router-outlet>
                <div #appOverlay></div>
            </div>
        </div>
    </div>
    <div #overlay></div>
</div>
```

The Universal Overlay consists of tabs and their content. Oden supplies a single tab which is called `UniversalAppsComponent` and it's automatically injected into the service with a sort order of `0`.

###[profile]: _ProfileModel_
Property used to display the user profile info in universal layer. Should be an object of the type `ProfileModel`.

###[appTitle]: _string_
`appTitle` is a string property for displaying the application name in the universal layer. Defaults to `Ericsson Revenue Manager`.

## UniversalService.addTab(UniversalTab)

To add a Tab to the Universal Overlay use the `addTab` method on the UniversalService. Example:

```js
this._universalService.addTab(new UniversalTab ({
    name: 'Apps',
    identifier: 'apps',
    component: UniversalAppsComponent,
    order: 0,
    icon: 'mainmenu',
    hotkey: 'a'
}));
```

`icon` take the same values as `cui-icon`. The menu will be sorted after order, from low to high.

If you specify a `hotkey`, pressing `Alt` + that key will bring up the Universal Overlay with the tab selected.

Make sure your tab component extends `UniversalTabView`. Example:

```
@Component({
    templateUrl: 'dummy.component.html',
    encapsulation: ViewEncapsulation.None,
    animations: [TAB_VIEW.ANIMATION]
})
export class DummyComponent extends UniversalTabView {
    ...
}
```

## UniversalService.tabs: Array<UniversalTab>

Returns all added tabs
    
## UniversalService.showUniversalOverlay(identifyer?: string, canBeClosed: boolean = true)

Call this function to open the overlay. Supply `identifier`, ie `apps`, to make the given tab active on open. The identifier is specified in the UniversalTab model and you set it when you push the model into `addTab` method in the UniversalService. Set `canBeClosed` to false to hide the Close button and disable the option to close with Escape key.

## UniversalService - Favorites

`UniversalService.favoritesEnabled.next(true)` to enable favorites. This will show the stars next
to route items and show "Favorites" in the drop down-menu.

The UniversalService comes with the function `setFavorites` and the emitter `onFavoritesChange`,
both useful when getting and saving Favorites in the Universal Layer.

`setFavorites` takes 1 argument, Array<string>, where each string represents either an
application id (top level application) or a route path (sub item).  `onFavoritesChange` emits
the same array which makes these easy to use in conjunction with backend.

Pseudo example:
```
universalService.favoritesEnabled.next(true)
universalService.setFavorites(getFavoritesFromBackend());
universalService.onFavoritesChange.subscribe(favorites => {
    saveFavoritesToBackend(favorites);
}
```

