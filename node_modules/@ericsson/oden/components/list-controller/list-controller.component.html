<ng-container [ngSwitch]="_context">
    <ng-container *ngSwitchCase="'TABLE'">
        <div class="context context-table cui-list-controller-block-style">
            <div class="filter-section">
                <div class="filter-section-inside">
                    <ng-template
                        [ngTemplateOutlet]="cuiListControllerFilter"
                    ></ng-template>
                    <ng-template
                        [ngTemplateOutlet]="moreButtonTemplate"
                    ></ng-template>
                    <ng-template
                        [ngTemplateOutlet]="cuiListControllerClearFilters"
                    ></ng-template>
                    <ng-template
                        [ngTemplateOutlet]="cuiListControllerNumberOfResults"
                    ></ng-template>
                </div>
            </div>
        </div>
    </ng-container>
    <ng-container *ngSwitchCase="'LIBRARY'">
        <div class="context context-library">
            <div class="filter-section">
                <div class="filter-section-inside">
                    <ng-template
                        [ngTemplateOutlet]="cuiListControllerFilter"
                    ></ng-template>
                    <ng-container *ngIf="!cuiListControllerCategoryFilterQueryList.first &&
                    cuiListControllerNumberOfResultsQueryList.first">
                        <cui-container>
                            <cui-row>
                                <cui-column [align]="'end'">
                                    <ng-template
                                        [ngTemplateOutlet]="
                                            cuiListControllerNumberOfResults
                                        "
                                    ></ng-template>
                                </cui-column>
                            </cui-row>
                        </cui-container>
                    </ng-container>
                    <cui-toggler *ngIf="cuiListControllerCategoryFilterQueryList.first"
                    [expanded]="isFiltersExpanded">
                        <div class="category-filters">
                            <ng-template
                                [ngTemplateOutlet]="
                                    cuiListControllerCategoryFilter
                                "
                            ></ng-template>
                        </div>
                        <cui-container>
                            <cui-row>
                                <cui-column>
                                    <ng-template
                                        [ngTemplateOutlet]="
                                            cuiListControllerClearFilters
                                        "
                                    ></ng-template>
                                </cui-column>
                                <cui-column [align]="'end'">
                                    <ng-template
                                        [ngTemplateOutlet]="
                                            cuiListControllerNumberOfResults
                                        "
                                    ></ng-template>
                                </cui-column>
                            </cui-row>
                        </cui-container>
                        <cui-toggler-expand-label>{{
                            'ODEN.COMMON.MORE' | translate
                        }}</cui-toggler-expand-label>
                        <cui-toggler-collapse-label>{{
                            'ODEN.COMMON.COLLAPSE' | translate
                        }}</cui-toggler-collapse-label>
                    </cui-toggler>
                </div>
            </div>
        </div>
    </ng-container>
    <ng-container *ngSwitchCase="'DRAWER'">
        <div class="context context-drawer">
            <div class="filter-section">
                <div class="filter-section-inside">
                    <ng-template
                        [ngTemplateOutlet]="cuiListControllerFilter"
                    ></ng-template>
                    <ng-template
                        [ngTemplateOutlet]="cuiListControllerGeneral"
                    ></ng-template>
                    <div class="category-filters">
                        <ng-template
                            [ngTemplateOutlet]="cuiListControllerCategoryFilter"
                        ></ng-template>
                    </div>
                    <cui-container>
                        <cui-row>
                            <cui-column>
                                <ng-template
                                    [ngTemplateOutlet]="
                                        cuiListControllerClearFilters
                                    "
                                ></ng-template>
                            </cui-column>
                            <cui-column [align]="'end'">
                                <ng-template
                                    [ngTemplateOutlet]="
                                        cuiListControllerNumberOfResults
                                    "
                                ></ng-template>
                            </cui-column>
                        </cui-row>
                    </cui-container>
                </div>
            </div>
            <div
                *ngIf="
                    cuiListControllerOrderQueryList.first ||
                    cuiListControllerActionQueryList.first
                "
                class="sorting-section"
            >
                <ng-template
                    [ngTemplateOutlet]="cuiListControllerOrder"
                ></ng-template>
                <ng-template
                    [ngTemplateOutlet]="cuiListControllerAction"
                ></ng-template>
            </div>
        </div>
    </ng-container>
    <ng-container *ngSwitchCase="'UNIVERSALAPPS'">
        <div class="context context-universal-apps">
            <ng-template
                [ngTemplateOutlet]="cuiListControllerFilter"
            ></ng-template>
            <ng-template
                [ngTemplateOutlet]="cuiListControllerCategoryFilter"
            ></ng-template>
            <ng-template
                [ngTemplateOutlet]="cuiListControllerAction"
            ></ng-template>
            <ng-template
            [ngTemplateOutlet]="cuiListControllerOrder"
        ></ng-template>
        <ng-template
            [ngTemplateOutlet]="cuiListControllerGeneral"
        ></ng-template>
        </div>
    </ng-container>
    <ng-container *ngSwitchDefault>
        <div
            #filterSortingWrapper
            [cuiLoader]="_loading"
            class="context context-default cui-list-controller-block-style"
            [class.loading]="_loading"
            [class.full-width]="_fullWidth"
            [class.no-sorting-section]="!cuiListControllerOrderQueryList.first && !cuiListControllerActionQueryList.first"
        >
            <div class="filter-section" #defaultFilterSection>
                <div class="filter-section-inside">
                    <ng-template
                        [ngTemplateOutlet]="cuiListControllerFilter"
                    ></ng-template>
                    <ng-container *ngIf="!_isFiltersHidden">
                        <ng-template
                            [ngTemplateOutlet]="cuiListControllerCategoryFilter"
                        ></ng-template>
                        <ng-template
                            [ngTemplateOutlet]="cuiListControllerGeneral"
                        ></ng-template>
                    </ng-container>
                    <ng-container *ngIf="_isFiltersHidden">
                        <ng-template
                            [ngTemplateOutlet]="moreButtonTemplate"
                        ></ng-template>
                    </ng-container>
                    <ng-template
                        [ngTemplateOutlet]="cuiListControllerClearFilters"
                    ></ng-template>
                    <ng-template
                        [ngTemplateOutlet]="cuiListControllerNumberOfResults"
                    ></ng-template>
                    <div #defaultFilterRightPosition></div>
                </div>
            </div>
            <div
                #defaultSortingSection
                *ngIf="
                    cuiListControllerOrderQueryList.first ||
                    cuiListControllerActionQueryList.first
                "
                class="sorting-section"
            >
                <ng-template
                    [ngTemplateOutlet]="cuiListControllerOrder"
                ></ng-template>
                <ng-template
                    [ngTemplateOutlet]="cuiListControllerAction"
                ></ng-template>
            </div>
        </div>
    </ng-container>
</ng-container>

<!-- Display everything else -->
<ng-content></ng-content>

<!-- Default Modal filters -->
<ng-template #defaultModalFiltersTemplate>
    <div
        class="cui-list-controller-modal-filters cui-list-controller-block-style"
    >
        <ng-template
            [ngTemplateOutlet]="cuiListControllerCategoryFilter"
        ></ng-template>
        <ng-template
            [ngTemplateOutlet]="cuiListControllerGeneral"
        ></ng-template>
    </div>
</ng-template>

<!-- Table Modal filters -->
<ng-template #tableModalFiltersTemplate>
    <div
        class="cui-list-controller-modal-filters cui-list-controller-block-style"
    >
        <ng-template
            [ngTemplateOutlet]="cuiListControllerCategoryFilter"
        ></ng-template>
        <ng-template
            [ngTemplateOutlet]="cuiListControllerGeneral"
        ></ng-template>
        <ng-template [ngTemplateOutlet]="cuiListControllerOrder"></ng-template>
        <ng-template [ngTemplateOutlet]="cuiListControllerAction"></ng-template>
    </div>
</ng-template>

<!-- Button template -->
<ng-template #moreButtonTemplate>
    <ng-container
        *ngIf="
            cuiListControllerCategoryFilterQueryList.first ||
            cuiListControllerGeneralQueryList.first ||
            cuiListControllerOrderQueryList.first ||
            cuiListControllerActionQueryList.first
        "
    >
        <div class="more-filters-button">
            <button
                class="small cui-button"
                (click)="openFilterDialog()"
                cui-button=""
            >
                <span>{{
                    'ODEN.COMPONENTS.LIST_CONTROLLER.MORE_FILTERS_LABEL'
                        | translate
                }}</span>
            </button>
        </div>
    </ng-container>
</ng-template>

<!-- Wrappers for the ng-content selects -->
<ng-template #cuiListControllerFilter>
    <ng-content select="cui-list-controller-filter"></ng-content>
</ng-template>
<ng-template #cuiListControllerCategoryFilter>
    <ng-content select="cui-list-controller-category-filter"></ng-content>
</ng-template>
<ng-template #cuiListControllerGeneral>
    <ng-content select="cui-list-controller-general"></ng-content>
</ng-template>
<ng-template #cuiListControllerClearFilters>
    <ng-content select="cui-list-controller-clear-filters"></ng-content>
</ng-template>
<ng-template #cuiListControllerNumberOfResults>
    <ng-content select="cui-list-controller-number-of-results"></ng-content>
</ng-template>
<ng-template #cuiListControllerOrder>
    <ng-content select="cui-list-controller-order"></ng-content>
</ng-template>
<ng-template #cuiListControllerAction>
    <ng-content select="cui-list-controller-action"></ng-content>
</ng-template>
